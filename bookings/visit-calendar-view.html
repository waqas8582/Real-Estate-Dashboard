<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Real Estate</title>
    <!-- ============= Custome CSS ============== -->
    <link rel="stylesheet" href="../assets/css/style.css" />
    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- ===== Loader Start ===== -->
    <div id="loader">
      <div class="loader-content text-center">
        <div class="logo-circle mb-3">
          <ion-icon name="home-outline"></ion-icon>
        </div>
        <h2 class="loader-title">Real Estate Portal</h2>
        <p class="loader-subtitle">Loading your dashboard...</p>
      </div>
    </div>
    <!-- ============== Navigation ================= -->
    <div class="container-fluid p-0 m-0">
      <div class="navigation">
        <ul>
          <li>
            <a href="#">
              <span class="icon"
                ><ion-icon name="stats-chart-outline"></ion-icon
              ></span>
              <span class="title">Real Estate Portal</span>
            </a>
          </li>
          <li>
            <a href="../index.html">
              <span class="icon"
                ><ion-icon name="home-outline"></ion-icon
              ></span>
              <span class="title">Dashboard</span>
            </a>
          </li>

          <!-- Properties -->
          <li class="has-submenu">
            <a href="#">
              <span class="icon"
                ><ion-icon name="business-outline"></ion-icon
              ></span>
              <span class="title">Properties</span>
            </a>
            <ul class="submenu">
              <li></li>
              <li><a href="all-properties.html">All Properties</a></li>
              <li><a href="create.html">Add Property</a></li>
              <li><a href="property-types.html">Property Types</a></li>
              <li><a href="amenities.html">Amenities</a></li>
            </ul>
          </li>

          <!-- Agents -->
          <li class="has-submenu">
            <a href="#">
              <span class="icon"
                ><ion-icon name="people-outline"></ion-icon
              ></span>
              <span class="title">Agents</span>
            </a>
            <ul class="submenu">
              <li></li>
              <li><a href="all-agents.html">All Agents</a></li>
              <li><a href="create.html">Add Agent</a></li>
              <li><a href="#">Agent Reviews</a></li>
            </ul>
          </li>

          <!-- Customers -->
          <li class="has-submenu">
            <a href="#">
              <span class="icon"
                ><ion-icon name="person-circle-outline"></ion-icon
              ></span>
              <span class="title">Customers</span>
            </a>
            <ul class="submenu">
              <li></li>
              <li><a href="all-customers.html">All Customers</a></li>
              <li><a href="leads.html" class="active">Leads</a></li>
              <li><a href="#">Saved Properties</a></li>
            </ul>
          </li>

          <!-- Listings -->
          <li class="has-submenu">
            <a href="#">
              <span class="icon"
                ><ion-icon name="albums-outline"></ion-icon
              ></span>
              <span class="title">Listings</span>
            </a>
            <ul class="submenu">
              <li></li>
              <li><a href="active-listings.html">Active Listings</a></li>
              <li><a href="pending-listings.html">Pending Listings</a></li>
              <li><a href="#">Rejected Listings</a></li>
            </ul>
          </li>
          <!-- Bookings -->
          <li class="has-submenu">
            <a href="#">
              <span class="icon"
                ><ion-icon name="calendar-outline"></ion-icon
              ></span>
              <span class="title">Bookings</span>
            </a>
            <ul class="submenu">
              <li></li>
              <li><a href="all-bookings.html">All Bookings</a></li>
              <li><a href="upcoming-visits.html">Upcoming Visits</a></li>
              <li><a href="visit-calendar-view.html">Visits Calendar</a></li>
              <li><a href="completed-bookings.html">Completed</a></li>
              <li><a href="cancelled-bookings.html">Cancelled</a></li>
            </ul>
          </li>
          <!-- Payments -->
          <li class="has-submenu">
            <a href="#">
              <span class="icon"
                ><ion-icon name="card-outline"></ion-icon
              ></span>
              <span class="title">Payments</span>
            </a>
            <ul class="submenu">
              <li></li>
              <li><a href="../payments/transactions.html">Transactions</a></li>
              <li><a href="../payments/invoices.html">Invoices</a></li>
              <li><a href="../payments/payment-settings.html">Payment Settings</a></li>
            </ul>
          </li>

          <!-- CMS -->
          <li class="has-submenu">
            <a href="#">
              <span class="icon"
                ><ion-icon name="document-text-outline"></ion-icon
              ></span>
              <span class="title">CMS</span>
            </a>
            <ul class="submenu">
              <li></li>
              <li><a href="../cms/blogs.html">Blogs</a></li>
              <li><a href="../cms/blog-categories.html">Blog Categories</a></li>
              <li><a href="../cms/pages.html">Pages</a></li>
              <li><a href="../cms/banners.html">Banners</a></li>
            </ul>
          </li>

          <!-- Settings -->
          <li class="has-submenu">
            <a href="#">
              <span class="icon"
                ><ion-icon name="settings-outline"></ion-icon
              ></span>
              <span class="title">Settings</span>
            </a>
            <ul class="submenu">
              <li></li>
              <li><a href="#">Profile Settings</a></li>
              <li><a href="#">System Settings</a></li>
              <li><a href="#">Roles & Permissions</a></li>
            </ul>
          </li>

          <!-- Support -->
          <li>
            <a href="#">
              <span class="icon"
                ><ion-icon name="help-outline"></ion-icon
              ></span>
              <span class="title">Support</span>
            </a>
          </li>

          <li>
            <a href="#">
              <span class="icon"
                ><ion-icon name="log-out-outline"></ion-icon
              ></span>
              <span class="title">Logout</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- ====================== main ===================== -->
      <div class="main p-4">
        <!-- Top Bar -->
        <div class="topbar">
          <div class="toggle"><ion-icon name="menu"></ion-icon></div>
          <div class="search">
            <label>
              <input type="text" placeholder="Search bookings..." />
              <ion-icon name="search"></ion-icon>
            </label>
          </div>
          <div class="user">
            <img
              src="../assets/imgs/customer01.jpg"
              alt="user"
              class="rounded-circle"
              width="35"
            />
          </div>
        </div>

        <!-- Month Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h3 class="fw-bold text-dark">
            <ion-icon name="calendar-outline"></ion-icon> Visit Calendar
          </h3>
          <div>
            <button id="prevMonth" class="btn btn-outline-primary btn-sm me-2">
              <ion-icon name="chevron-back-outline"></ion-icon> Prev
            </button>
            <button id="nextMonth" class="btn btn-outline-primary btn-sm">
              Next <ion-icon name="chevron-forward-outline"></ion-icon>
            </button>
          </div>
        </div>

        <div class="text-center mb-3">
          <h4 id="calendarMonth" class="fw-semibold text-primary"></h4>
        </div>

        <!-- Calendar -->
        <div class="card shadow-sm p-3">
          <div id="calendar" class="calendar-grid"></div>
        </div>

        <!-- Visit Details Modal -->
        <div class="modal fade" id="visitModal" tabindex="-1">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">
                  <ion-icon name="information-circle-outline"></ion-icon> Visit
                  Details
                </h5>
                <button
                  type="button"
                  class="btn-close btn-close-white"
                  data-bs-dismiss="modal"
                ></button>
              </div>
              <div class="modal-body">
                <p><strong>Date:</strong> <span id="visitDate"></span></p>
                <div id="visitList" class="mb-3"></div>
                <button class="btn btn-outline-success w-100">
                  <ion-icon name="add-circle-outline"></ion-icon> Add New Visit
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- =========== custome js ============= -->
    <script src="../assets/js/main.js"></script>
    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ========icons libary ============== -->
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const calendar = document.getElementById("calendar");
        const monthLabel = document.getElementById("calendarMonth");
        const visitModal = new bootstrap.Modal(
          document.getElementById("visitModal")
        );
        const visitDate = document.getElementById("visitDate");
        const visitList = document.getElementById("visitList");

        const months = [
          "January",
          "February",
          "March",
          "April",
          "May",
          "June",
          "July",
          "August",
          "September",
          "October",
          "November",
          "December",
        ];

        let current = new Date();

        // Example Visits
        const visits = {
          "2025-11-03": [
            {
              name: "Hassan Ali",
              time: "2:00 PM",
              city: "Lahore",
              status: "Upcoming",
            },
          ],
          "2025-11-07": [
            {
              name: "Bilal Ahmed",
              time: "11:00 AM",
              city: "Karachi",
              status: "Completed",
            },
          ],
          "2025-11-10": [
            {
              name: "Ayesha Khan",
              time: "4:00 PM",
              city: "Islamabad",
              status: "Cancelled",
            },
          ],
        };

        // Generate calendar
        function renderCalendar() {
          calendar.innerHTML = "";
          const year = current.getFullYear();
          const month = current.getMonth();
          monthLabel.textContent = `${months[month]} ${year}`;

          const firstDay = new Date(year, month, 1);
          const lastDay = new Date(year, month + 1, 0);
          const startDay = firstDay.getDay();

          // Headers
          ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"].forEach((day) => {
            const header = document.createElement("div");
            header.classList.add("calendar-header");
            header.textContent = day;
            calendar.appendChild(header);
          });

          // Empty slots before first day
          for (let i = 0; i < startDay; i++) {
            const empty = document.createElement("div");
            empty.classList.add("calendar-day", "disabled");
            calendar.appendChild(empty);
          }

          // Dates
          for (let day = 1; day <= lastDay.getDate(); day++) {
            const date = new Date(year, month, day);
            const dateKey = date.toISOString().split("T")[0];
            const cell = document.createElement("div");
            cell.classList.add("calendar-day");
            cell.innerHTML = `<span>${day}</span>`;

            if (visits[dateKey]) {
              visits[dateKey].forEach((v) => {
                const badge = document.createElement("div");
                badge.classList.add("visit-badge");
                if (v.status === "Upcoming") badge.classList.add("bg-primary");
                if (v.status === "Completed") badge.classList.add("bg-success");
                if (v.status === "Cancelled") badge.classList.add("bg-danger");
                badge.textContent = v.time;
                cell.appendChild(badge);
              });
            }

            cell.addEventListener("click", () => openModal(dateKey));
            calendar.appendChild(cell);
          }
        }

        // Open visit modal
        function openModal(dateKey) {
          visitDate.textContent = dateKey;
          visitList.innerHTML = "";

          if (visits[dateKey]) {
            visits[dateKey].forEach((v) => {
              const div = document.createElement("div");
              div.classList.add("p-2", "border", "rounded", "mb-2");
              div.innerHTML = `
            <strong>${v.name}</strong><br>
            Time: ${v.time}<br>
            Location: ${v.city}<br>
            Status: <span class="badge ${
              v.status === "Upcoming"
                ? "bg-primary"
                : v.status === "Completed"
                ? "bg-success"
                : "bg-danger"
            }">${v.status}</span>
          `;
              visitList.appendChild(div);
            });
          } else {
            visitList.innerHTML = `<p class="text-muted mb-0">No visits scheduled.</p>`;
          }

          visitModal.show();
        }

        // Navigation
        document.getElementById("prevMonth").addEventListener("click", () => {
          current.setMonth(current.getMonth() - 1);
          renderCalendar();
        });
        document.getElementById("nextMonth").addEventListener("click", () => {
          current.setMonth(current.getMonth() + 1);
          renderCalendar();
        });

        renderCalendar();
      });
    </script>
  </body>
</html>
